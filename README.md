
# InfotexContest

Этот проект представляет собой систему логирования и сбора статистики, включающую следующие компоненты:

- **log_app**: Приложение для логирования, которое записывает сообщения в файл или отправляет их через сокет.
- **log_lib**: Библиотека логирования, обрабатывающая уровни логов и форматирование сообщений.
- **stat_app**: Приложение для сбора статистики, получающее информацию о лог-сообщениях через сокет.
- **log_tests**: Набор unit-тестов для библиотеки логирования с использованием GoogleTest.

## Возможности

- Конфигурируемые уровни логирования (Low, Mid, High)
- Возможность смены уровня логирования в рантайме
- Логирование с использованием файловой системы и сокетов
- Сбор статистики: общее число сообщений, распределение по уровням, длины сообщений и количество сообщений за последний час

## Сборка и запуск

### С использованием Makefile

В терминале, находясь в корневой директории проекта, выполните следующие команды:

- **Сборка проекта:**
  ```bash
  make build
  ```
  
- **Запуск Log Application (файловый режим):**
  ```bash
  make run
  ```

- **Запуск Stats Collector:**
  ```bash
  make stats
  ```

- **Запуск Log Application в режиме сокета:**
  ```bash
  make socket-run
  ```

- **Прослушивание порта для сокет-соединения (в отдельном терминале):**
  ```bash
  make socket-listen
  ```

- **Очистка сборки и логов:**
  ```bash
  make clean
  ```

- **Запуск unit-тестов:**
  ```bash
  make test
  ```

### С использованием CMake

Проект использует CMake для сборки нескольких подкаталогов:

- log_lib
- log_app
- stat_app
- log_tests
- external/googletest

Убедитесь, что у вас установлены:
- CMake версии 3.10 или новее
- Компилятор с поддержкой C++17

## Использование

### Log Application (log_app)

Запускается следующим образом:
```bash
./log_app <logfile_или_socket> <LogLevel>
```
- `logfile_или_socket`: Путь к файлу логов или строка вида `socket:<host>:<port>`
- `LogLevel`: Уровень логирования по умолчанию (например, `Low`, `Mid`, `High`).

Внутри приложения:
- Формат ввода `<LogLevel>:<сообщение>` задаёт уровень для данного сообщения.
- Формат `Level: <новый уровень>` позволяет сменить текущий уровень логирования.

### Statistics Collector (stat_app)

Запускается следующим образом:
```bash
./stats_collector <порт> <порог_сообщений> <таймаут_в_секундах>
```
- `порт`: порт для прослушивания входящих лог-сообщений.
- `порог_сообщений`: количество сообщений, после которого выводится статистика.
- `таймаут_в_секундах`: интервал, после которого, при отсутствии новых сообщений, статистика выводится.
